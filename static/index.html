<!DOCTYPE html>
<html>
<head>
	<title>Driver HUD</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body onclick="location.reload()"> <!-- Tap anywhere to reload in case something breaks -->
    <svg width="800px" height="480px" id="svgId">
        <style>
            .valueText {
                font-family: Helvetica;
                text-anchor: middle;
                font-size: 24px;
            }
            .valueSpan {
                font-family: Helvetica;
                text-anchor: middle;
                font-size: 24px;
            }
            .labelSpan {
                font-family: Helvetica;
                text-anchor: middle;
                font-size: 16px;
            }
            .minText {
                font-family: Helvetica;
                text-anchor: end;
                font-size: 20px;
            }
            .maxText {
                font-family: Helvetica;
                text-anchor: start;
                font-size: 20px;
            }
            .gaugePath {
                stroke-linecap: butt;
                transform: rotate(135deg);
                transition: stroke-dashoffset 500ms ease-in-out;
            }
        </style>
    </svg>
	<script src="config.js"></script>
    <script src="gauge.js"></script>
    <script src="faults.js"></script>
    <script>
        let batteryCurrent = new Gauge(config.batteryCurrent);
        let motorCurrent = new Gauge(config.motorCurrent);
        let solarCurrent = new Gauge(config.solarCurrent);
        let minCellVolt = new Gauge(config.minCellVolt);
        let soc = new Gauge(config.soc);
        let speed = new Gauge(config.speed);
        let time = new Gauge(config.time);
        let packVolt = new Gauge(config.packVolt);
        let minPackTemp = new Gauge(config.minPackTemp);
        let maxPackTemp = new Gauge(config.maxPackTemp);
        let motorTemp = new Gauge(config.motorTemp);
        let maxCellVolt = new Gauge(config.maxCellVolt);

		/*
		let faults = new FaultBox({
			"canvasId": "canvasId"
		});
		*/

        batteryCurrent.setValue(2.4);
        motorCurrent.setValue(2.4);
        solarCurrent.setValue(2.4);
        minCellVolt.setValue(3.6);
        soc.setValue(55);
        speed.setValue(30);
        time.setValue("10:30pm");
        packVolt.setValue(90);
        minPackTemp.setValue(22);
        maxPackTemp.setValue(26);
        motorTemp.setValue(45);
        maxCellVolt.setValue(5);

/*
		setTimeout(() => {
		faults.setErrorMessages([
			"Discharge Limit",
			"Charger Relay",
			"Int Hardware",
			"Int HS Therm",
			"Int Software",
			"Max Cell V High",
			"Min Cell V Low",
			"Pack Too Hot",
			"Int Comm",
			"Cell Balancing",
			"Weak Cell",
			"Low Cell Voltage",
			"Open Wiring",
			"Current Sensor",
			"Max Cell > 5V",
			"Cell ASIC",
			"Weak Pack",
			"Fan Monitor",
			"Thermistor",
			"Ext Comm",
			"Redundant PS",
			"High Volt Iso",
			"Input PS",
			"Charge Limit"
		]);
		}, 10000);

		setTimeout(() => {
			faults.setErrorMessages([]);
		}, 5000);
*/

		let i = 0;
		setInterval(() => {
			let rand = i; //Math.floor(Math.random() * 60);
			i++;
			speed.setValue(rand);
		}, 1000);
    </script>
</body>
</html>
